## Project setup with split-screen shell
Completed: 2026-01-16
Notes:
- Next.js 14+ with App Router configured
- Trigger.dev SDK 4.3.2 installed
- shadcn/ui initialized with button, card, tabs components
- SplitViewer component renders 50/50 layout with context for highlight state
- Homepage lists 3 example cards (progress-tracking active, others coming soon)
- CodePanel component with file tabs and line numbers
- Shiki highlighter set up (github-dark theme as placeholder)

## Code panel renders Shiki-highlighted code with line numbers
Completed: 2026-01-16
Notes:
- Shiki highlights TypeScript code server-side in page.tsx (async server component)
- Using tokyo-night theme (Trigger.dark theme not found in npm or Trigger.dev repos)
- Each line shows line number on left with zinc-600 color
- File tabs switch between task.ts, streams.ts, actions.ts
- ShikiLine component extracts individual lines from Shiki HTML output

## Click UI element highlights corresponding code lines
Completed: 2026-01-16
Notes:
- Created code-mappings.ts with progressMappings for UI element to code line mapping
- CodeLink component wraps elements and handles click to setHighlight
- data-code-id attributes on Button, "View stream definition", "View stream.append()" links
- Yellow background highlight via bg-yellow-500/20 class
- scrollIntoView with smooth behavior already implemented in CodePanel

## Progress tracking Trigger.dev task streams updates
Completed: 2026-01-16
Notes:
- Created src/trigger/streams.ts with progressStream defined via streams.define<ProgressUpdate>()
- Created src/trigger/tasks.ts with processDataTask that loops and appends progress updates
- Task accepts { items: number } payload
- Each update includes current, total, message via progressStream.append()
- Uses await with 500ms delay to simulate work

## Progress demo UI shows realtime updates from task
Completed: 2026-01-16
Notes:
- Created server action startProcessing() in actions.ts that triggers task and returns runId + token
- ProgressDemo uses useState for runState (runId + token) and isStarting loading state
- ProgressDisplay component uses useRealtimeStream(progressStream, runId, { accessToken })
- Progress bar shows percentage calculated from current/total
- Status message updates in realtime from latestUpdate.message
- Clicking Start button highlights trigger code via CodeLink

## Code panel auto-switches tabs when highlighting different file
Completed: 2026-01-16
Notes:
- Added manualTab state to track user's tab selection when no highlight is active
- activeFile derived from: highlight?.file || manualTab || files[0]?.name (priority order)
- handleTabChange sets manualTab and clears highlight via setHighlight(null)
- Tab switching is immediate (no animation)
- Fixed bug where clicking non-first tab would immediately switch back

## Smooth scroll and highlight animations
Completed: 2026-01-16
Notes:
- scrollIntoView with smooth behavior already in place from US-003
- Added highlight-pulse keyframe animation in globals.css
- Pulse goes from 35% opacity to 20% opacity over 300ms
- transition-colors duration-200 on lines for hover state transitions
- No jarring jumps - smooth scroll centers highlighted line

## Write README with all 7 sections
Completed: 2026-01-16
Notes:
- All 7 sections: title, overview, tech stack, setup, how it works, relevant code, learn more
- ASCII diagram shows data flow: Browser → Server Action → Trigger.dev → Stream back
- Setup includes env vars (TRIGGER_SECRET_KEY) and trigger.config.ts project ref
- Relevant code table maps features to source files
- All headings in sentence case per style guide

## Security review and deploy
Completed: 2026-01-16
Notes:
- No secrets in client code: only useRealtimeStream imported client-side
- Public tokens scoped correctly: { read: { runs: [handle.id] } } limits to specific run
- TRIGGER_SECRET_KEY only on server: actions.ts has "use server", SDK reads from process.env
- Deployment and environment testing requires manual user action
